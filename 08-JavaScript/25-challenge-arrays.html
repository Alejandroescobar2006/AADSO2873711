<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Template</title>
    <link rel="stylesheet" href="css/master.css">
</head>
<style>
    .container {
        background: url(images/jugador/image.png) no-repeat;
        background-size: 800px;
        width: auto;
        height: 1200px;
    }
    
    .cont {
        display: flex;
        padding: 20px;
        justify-content: center;
    }
    
    #selectedPlayers {
        display: flex;
        padding: 20px;
        justify-content: flex-start;
        overflow-x: auto;
        max-width: 100%;
        scrollbar-width: thin;
    }
    
    .seccion {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        border-radius: .8rem;
        margin: 20px;
        width: 150px;
        height: auto;
        padding-bottom: 10px;
        background: #00000000;
        text-align: center;
    }
    
    .player-img {
        width: 130px;
        height: 180px;
        object-fit: contain;
        cursor: pointer;
        margin-bottom: 8px;
    }
    
    .player-name {
        margin: 0;
        padding: 0;
        font-weight: bold;
        color: #eeff00;
        font-size: 14px;
        text-align: center;
        width: 100%;
        display: block;
    }
    
    .buttoms {
        justify-content: center;
        padding: 20px;
        display: flex;
    }
    
    .btn {
        padding: 20px;
    }
    
    button {
        width: 100px;
        height: 30px;
        cursor: pointer;
        opacity: 1;
    }
    
    .round-btn {
        padding: 10px;
        display: flex;
        gap: 90px;
        justify-content: center;
        align-items: center;
    }
    
    .agg,
    .del,
    .sele {
        text-align: center;
        justify-content: center;
        align-items: center;
        padding: 15px;
    }
    
    .al {
        background: #3e31ff;
        height: 100px;
        width: 100px;
        border-radius: 100%;
        font-size: 24px;
        cursor: pointer;
        opacity: 1;
        z-index: 5000;
    }
    
    hr {
        background-color: #000;
        height: 2px;
    }
    
    input {
        width: 100px;
        height: 50px;
        text-align: center;
    }
    
    .final {
        position: absolute;
        bottom: -5px;
        left: 50%;
        transform: translateX(-50%);
        color: #d5ec06;
        z-index: 1;
    }
    
    .seccion1 {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        border-radius: .8rem;
        margin: 20px;
        width: 150px;
        height: auto;
        padding-bottom: 10px;
        background: #ffffff00;
        text-align: center;
        position: relative;
        flex-shrink: 0;
    }
    
    .selected {
        border: 3px solid #4CAF50;
    }
    
    .seccion1 img {
        max-width: 130px;
        max-height: 180px;
        object-fit: contain;
        cursor: pointer;
    }
    
    .seccion1.selected {
        border: 3px solid #FF0000;
    }
    
    .seccion.selected {
        transform: scale(1.1);
        border: 3px solid #4CAF50;
        transition: transform 0.2s, border 0.2s;
    }
    
    .seccion.selected .player-name {
        color: #4CAF50;
    }
    
    #selectedPlayers::-webkit-scrollbar {
        height: 8px;
    }
    
    #selectedPlayers::-webkit-scrollbar-thumb {
        background-color: #888;
        border-radius: 4px;
    }
    
    #selectedPlayers::-webkit-scrollbar-track {
        background-color: #f1f1f1;
    }
    
    .james {
        width: 220px;
    }
    
    .lucho {
        width: 380px;
    }
    
    .bicho {
        width: 250px;
    }
    
    .boto {
        background-color: #4CAF50;
        height: 40px;
        width: 120px;
        border: none;
        border-radius: 10px;
        color: #000;
        font-size: 16px;
        text-decoration: black;
    }
    
    .botoe {
        background-color: #a80202;
        height: 40px;
        width: 120px;
        border: none;
        border-radius: 10px;
        color: #000;
        font-size: 16px;
        text-decoration: black;
    }
</style>

<body>
    <nav class="controls">
        <a href="index.html">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="#ffffff" d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg>
        </a>
    </nav>
    <main>
        <header>
            <h1>24 - Methods Array</h1>
            <h2>
                Manejo de arrays usando methods
            </h2>
        </header>
        <section>
            <h2>Seleccione sus jugadores</h2>
            <ul class="emojis"></ul>
        </section>

        <div class="container">
            <div class="cont">
                <div class="seccion" data-player="bicho">
                    <img src="images/jugador/Untitled/bicho.png" class="player-img bicho">
                    <p class="player-name">EL BICHO</p>
                </div>
                <div class="seccion" data-player="DayroGol">
                    <img src="images/jugador/Untitled/DayroGol.png" class="player-img">
                    <p class="player-name">DAYROGOL</p>
                </div>
                <div class="seccion" data-player="Dinho">
                    <img src="images/jugador/Untitled/Dinho.png" class="player-img">
                    <p class="player-name">EL MAGO</p>
                </div>
                <div class="seccion" data-player="FENOMENO">
                    <img src="images/jugador/Untitled/FENOMENO.png" class="player-img">
                    <p class="player-name">EL FENOMENO</p>
                </div>
            </div>

            <div class="cont">
                <div class="seccion" data-player="Kroos">
                    <img src="images/jugador/Untitled/Kroos.png" class="player-img">
                    <p class="player-name">ICEMAN</p>
                </div>
                <div class="seccion" data-player="Lucho">
                    <img src="images/jugador/Untitled/Lucho.png" class="player-img lucho">
                    <p class="player-name">EL GUAJIRO</p>
                </div>
                <div class="seccion" data-player="James">
                    <img src="images/jugador/Untitled/James.png" class="player-img james">
                    <p class="player-name">CALIDOSO</p>
                </div>
                <div class="seccion" data-player="Kevin">
                    <img src="images/jugador/Untitled/Kevin.png" class="player-img">
                    <p class="player-name">EL PRINCIPE</p>
                </div>
            </div>

            <div class="buttoms">
                <div class="btn">
                    <button id="btnAgregar" class="boto">Ag. Inicio</button>
                </div>
              
                <div class="btn">
                    <button id="btnUltimo" class="boto">Ag. Final</button>
                </div>
            </div>

            <div class="round-btn">
                <div class="agg">
                    <button class="al" id="btnAdd">+</button>
                </div>

                <div class="sele">
                    <input type="number" id="playerIndex" min="1" max="4" value="1" placeholder="Seleccione posición">
                </div>

                <div class="del">
                    <button class="al" id="btnbor">-</button>
                </div>
            </div>
            <hr>
            <div class="cont" id="selectedPlayers">
                <div class="seccion1">
                    <span class="final"></span>
                </div>
                <div class="seccion1">
                    <span class="final"></span>
                </div>
                <div class="seccion1">
                    <span class="final"></span>
                </div>
                <div class="seccion1">
                    <span class="final"></span>
                </div>
            </div>
        </div>
    </main>

    <script>
        const botonAgregarInicio = document.querySelector('#btnAgregar');
        const botonAgregarFinal = document.querySelector('#btnUltimo');
        const botonAgregar = document.querySelector('#btnAdd');
        const botonQuitar = document.querySelector('#btnbor');
        const botonEliminar = document.querySelector('#btnEiminar');
        const inputIndiceJugador = document.querySelector('#playerIndex');

        const seccionesJugadores = document.querySelectorAll('.seccion');
        const imagenesJugadores = document.querySelectorAll('.player-img');

        const contenedorJugadoresSeleccionados = document.querySelector('#selectedPlayers');
        const posicionesJugadores = document.querySelectorAll('.seccion1');

        let jugadoresSeleccionados = [];
        let jugadorActual = null;
        let posicionActual = '';
        let accionActual = 'agregar';

        function actualizarVistaJugadores() {
            posicionesJugadores.forEach(posicion => {
                const numeroPosicion = posicion.querySelector('.final');
                posicion.innerHTML = '';
                posicion.appendChild(numeroPosicion);
            });

            jugadoresSeleccionados.forEach((jugador, indice) => {
                if (indice < posicionesJugadores.length) {
                    const contenedor = document.createElement('div');
                    contenedor.style.display = 'flex';
                    contenedor.style.flexDirection = 'column';
                    contenedor.style.alignItems = 'center';
                    contenedor.style.width = '100%';

                    const nuevaImagen = document.createElement('img');
                    nuevaImagen.src = jugador.src;
                    nuevaImagen.alt = jugador.dataset.player || '';
                    nuevaImagen.classList.add('player-img');

                    const nombreJugador = jugador.parentElement.querySelector('.player-name') ?
                        jugador.parentElement.querySelector('.player-name').textContent :
                        '';

                    const nombreElemento = document.createElement('p');
                    nombreElemento.classList.add('player-name');
                    nombreElemento.textContent = nombreJugador;

                    const numeroPosicion = document.createElement('span');
                    numeroPosicion.classList.add('final');
                    numeroPosicion.textContent = indice + 1;

                    contenedor.appendChild(nuevaImagen);
                    contenedor.appendChild(nombreElemento);

                    posicionesJugadores[indice].innerHTML = '';
                    posicionesJugadores[indice].appendChild(contenedor);
                    posicionesJugadores[indice].appendChild(numeroPosicion);
                }
            });
        }

        function seleccionarJugador(elementoJugador) {
            seccionesJugadores.forEach(seccion => {
                seccion.classList.remove('selected');
            });

            elementoJugador.parentElement.classList.add('selected');
            jugadorActual = elementoJugador;
        }

        function actualizarEstilosBotones() {
            botonAgregarInicio.style.opacity = '1';
            botonAgregarFinal.style.opacity = '1';
            botonAgregar.style.opacity = '1';
            botonQuitar.style.opacity = '1';
        }

        function agregarJugadorASeleccion(jugador, posicion) {
            if (jugadoresSeleccionados.length >= posicionesJugadores.length) {
                alert('Ya has seleccionado el máximo de jugadores permitidos.');
                return;
            }

            if (posicion > 0 && posicion <= jugadoresSeleccionados.length + 1) {
                jugadoresSeleccionados.splice(posicion - 1, 0, jugador);
            } else if (posicionActual === 'inicio') {
                jugadoresSeleccionados.unshift(jugador);
            } else {
                jugadoresSeleccionados.push(jugador);
            }
        }

        function quitarJugadorDeSeleccion(posicion) {
            if (jugadoresSeleccionados.length === 0) return;

            if (posicion > 0 && posicion <= jugadoresSeleccionados.length) {
                jugadoresSeleccionados.splice(posicion - 1, 1);
            } else if (posicionActual === 'inicio') {
                jugadoresSeleccionados.shift();
            } else {
                jugadoresSeleccionados.pop();
            }
        }

        function manejarAccionFinal() {
            if (accionActual === 'agregar' && !jugadorActual) {
                alert('Necesitas seleccionar un jugador primero');
                return;
            }

            if (accionActual === 'agregar' && jugadoresSeleccionados.length >= posicionesJugadores.length) {
                alert('Ya has seleccionado el máximo de jugadores permitidos.');
                return;
            }

            let valorInput = inputIndiceJugador.value;

            if (accionActual === 'quitar' && valorInput === "") {
                alert('Debes especificar una posición para quitar un jugador');
                return;
            }

            if (valorInput !== "") {
                let posicion = parseInt(valorInput);

                if (posicion > 0 && posicion <= (accionActual === 'agregar' ? jugadoresSeleccionados.length + 1 : jugadoresSeleccionados.length)) {
                    if (accionActual === 'agregar') {
                        agregarJugadorASeleccion(jugadorActual, posicion);
                    } else {
                        quitarJugadorDeSeleccion(posicion);
                    }
                } else {
                    if (accionActual === 'agregar') {
                        alert('Posición inválida. Debe ser entre 1 y ' + (jugadoresSeleccionados.length + 1));
                    } else {
                        alert('Posición inválida. Debe ser entre 1 y ' + jugadoresSeleccionados.length);
                    }
                    return;
                }
            } else {
                if (accionActual === 'agregar') {
                    if (posicionActual === 'inicio') {
                        agregarJugadorASeleccion(jugadorActual, 1);
                    } else {
                        agregarJugadorASeleccion(jugadorActual, jugadoresSeleccionados.length + 1);
                    }
                }
            }

            actualizarVistaJugadores();
            inputIndiceJugador.value = "";
        }

        imagenesJugadores.forEach(img => {
            img.addEventListener('click', () => {
                seleccionarJugador(img);
            });
        });

        botonAgregarInicio.addEventListener('click', () => {
            posicionActual = 'inicio';
            actualizarEstilosBotones();

            if (jugadorActual) {
                agregarJugadorASeleccion(jugadorActual, 1);
                actualizarVistaJugadores();
            } else {
                alert('Selecciona un jugador primero');
            }
        });

        botonAgregarFinal.addEventListener('click', () => {
            posicionActual = 'final';
            actualizarEstilosBotones();

            if (jugadorActual) {
                agregarJugadorASeleccion(jugadorActual, jugadoresSeleccionados.length + 1);
                actualizarVistaJugadores();
            } else {
                alert('Selecciona un jugador primero');
            }
        });

        botonAgregar.addEventListener('click', () => {
            accionActual = 'agregar';
            actualizarEstilosBotones();
            manejarAccionFinal();
        });

        botonQuitar.addEventListener('click', () => {
            accionActual = 'quitar';
            actualizarEstilosBotones();

            if (jugadoresSeleccionados.length === 0) {
                alert('No hay jugadores seleccionados para quitar');
                return;
            }

            manejarAccionFinal();
        });

        botonEliminar.addEventListener('click', () => {
            if (jugadoresSeleccionados.length > 0) {
                jugadoresSeleccionados = [];
                actualizarVistaJugadores();
            } else {
                alert('No hay jugadores seleccionados para eliminar');
            }
        });

        posicionActual = 'final';
        accionActual = 'agregar';
        actualizarEstilosBotones();
    </script>
</body>

</html>
